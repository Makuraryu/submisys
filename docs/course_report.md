# 课程项目提交与答辩管理系统课程论文

## 引言
数据库课程项目在教学实践中通常涉及学生独立完成选题、项目设计与编码实现，并在期末进行成果提交与现场答辩。传统模式下，学生通过邮件或即时通讯工具提交材料，教师人工整理信息并安排答辩，导致数据分散、版本不可追踪且流程重复劳动。本课程项目旨在构建一个集学生项目提交、教师答辩评分与管理员统筹于一体的在线管理系统，以支撑数据库课程项目在提交、审核与答辩阶段的全流程管理。系统将核心功能聚焦于不同角色在真实教学流程中的操作需求，通过统一的 Web 平台提升信息流转效率，凸显数据库在业务建模中的关键作用。

在整体目标之外，本系统还兼顾教学环境的可部署性。考虑到课程实验室机房与学生个人电脑的软硬件差异，系统在架构设计中保持轻量化，确保在不依赖复杂云服务的情况下即可快速运行。此外，通过对角色权限的细分，系统能够模拟高校课程常见的管理结构，为学生提供真实的工程化体验，同时让教师在教学过程中重点关注数据库建模与业务逻辑实现的教学目标。

## 技术选型
项目后端选择 Bun 运行时与原生 Web 框架 Elysia.js 以提供高性能的 REST API；数据库采用易于部署的 SQLite，本地文件即可持久化；前端使用纯 HTML 与原生 JavaScript，并通过 TailwindCSS CDN 快速完成界面美化；服务器同时承担静态资源与 API 服务，由 Bun 单点部署完成。这一栈组合兼顾实验环境易用性与现代 Web 技术特性，适合课程作业的教学情境。

与 Node.js 相比，Bun 在启动速度和内建工具链方面具有优势，能够在课程演示阶段提供更快的开发反馈；同时 Elysia.js 提供类型安全的路由与中间件机制，便于在小型项目中快速搭建 API，并在课程中展示现代 TypeScript 框架的写法。数据库层选用 SQLite 则体现“零运维、零部署”优势，学生可直接在本地创建数据库文件，无需额外配置数据库服务，满足课堂演示的即时性需求。

前端技术选型强调易学习与原生能力结合。TailwindCSS 通过实用类样式快速搭建界面，降低学生在 CSS 布局上的负担，同时保留 JavaScript 对 DOM 的直接操作，让学生能够聚焦于业务逻辑与接口交互。整体技术栈还便于在未来引入测试框架与持续集成工具，为课程进一步升级提供空间。

## 数据库需求分析
根据角色划分，系统需支持学生项目提交与查看、教师查看答辩安排及提交评分、管理员管理答辩时间、用户与项目等操作，同时提供通用登录、登出能力。围绕这些业务，数据库必须解决以下需求：
- **用户管理**：区分学生、教师与管理员三类角色，维护认证凭据，并支撑登录态管理。系统需记录用户基本信息、角色标识与密码摘要，保证认证安全与授权准确。
- **项目管理**：每位学生最多提交一个项目，项目需记录答辩时间、状态与描述信息。数据库需要防止重复提交，并保存答辩安排的引用以供后续统计。
- **答辩安排**：维护具体时间与地点，关联教师及学生项目，支持可用性状态变更。管理员需要对答辩时段进行增删改操作，确保场次无冲突。
- **教师分配与评分**：教师需与答辩场次建立关联，并针对项目提交通过/未通过结果及评语。评分数据既要追踪责任教师，又要便于查询历史评价。
- **审批追踪**：管理员调整项目状态、答辩安排与用户信息时需保持数据一致性。系统需支持在审批、撤销、重新安排等情境下的数据回滚或更新。

在上述需求背景下，还需关注非功能性约束。例如，答辩安排在高峰期可能出现频繁查询，因此数据模型应支持多条件过滤；此外，用户角色的权限判断必须与数据库设计配合，以避免跨角色数据泄露；日志与审计需求虽暂未实现，但数据库结构需保留扩展字段空间，为未来的操作记录提供支持。

## 数据库设计
数据库采用五张核心表：`users`、`defense_slots`、`projects`、`teacher_assignments` 与 `scores`。`users` 表负责存储角色、用户名与密码，采用唯一约束保障账号唯一，并使用角色字段区分权限。在课程场景下，可进一步增加邮箱、学号或工号字段，以满足学校信息化对接需求。

`projects` 表以学生 ID 作为唯一键，确保一名学生只关联一个项目，并通过外键关联学生与答辩场次；项目状态默认 `pending`，为审批流留出初始状态，同时 `updated_at` 字段记录最近一次修改时间，为后续审计扩展提供依据。`defense_slots` 存储答辩时间、地点与状态，允许管理员对场次进行状态切换（如 `available`、`booked`、`cancelled`），从而在数据库层体现资源可用性。

考虑到教师与答辩场次之间的多对多关系，`teacher_assignments` 表使用组合唯一约束防止重复分配，并保留 `assigned_at` 字段记录分配时间，有助于统计教师工作量。`scores` 表关联项目与教师，记录评分结果、评语与更新时间，实现评分历史的可追踪性，并通过唯一约束防止同一教师对同一项目重复打分。

为了便于教学演示与快速验证，初始化脚本插入默认账号、答辩时间与教师分配，让学生在运行初始化命令后即可体验完整流程。后续如需扩展多校区或跨班级场景，可在现有表中增加班级、课程编号等维度字段，同时引入视图或物化视图以支持统计报表。

## 具体实现
服务器层由 Elysia 应用负责加载静态资源与 REST API，同时为学生、教师与管理员页面设置访问控制，若会话不存在或角色不匹配则重定向至登录页；应用还提供 `/health` 健康检查端点以便运维监控。在路由设计上，系统采用前后端同源部署策略，将静态页面和 API 服务统一由 Bun 提供，从而避免跨域问题并简化部署流程。

认证模块在登录时校验用户名与密码，成功后创建 Session、设置 HttpOnly Cookie，并在登出时清理会话信息。会话管理采用内存 Map 保存四小时有效期的 Session 记录，提供 Cookie 解析、过期清理与构建功能，确保受保护资源只向合法角色开放。尽管该方案在单节点部署下足够使用，但也为未来扩展到 Redis 等集中式 Session 存储预留了接口。

业务 API 按角色划分：学生端支持提交/更新项目、查看个人项目与查询答辩时间列表，均围绕 `projects` 与 `defense_slots` 表实现，并通过事务处理确保答辩时段占用的一致性。教师端可查看自身负责的答辩安排（含关联项目）并提交评分，评分同时更新项目状态实现流程闭环，并对重复评分进行拦截以维护评分准确性。管理员端提供用户管理、答辩场次管理、项目审批与删除等功能，涵盖多表查询、事务性更新及关联数据清理，保证数据一致。

前端脚本按页面角色初始化逻辑：统一的 `request` 封装处理 JSON 请求与错误提示；登录页提交后将用户信息保存在 `localStorage` 并重定向至对应仪表盘；角色页面均在加载时校验本地身份，不符合条件即跳转登录页。学生页面支持查看答辩时段、填报项目并即时反馈保存结果；教师页面展示场次与关联项目列表，并提交评分后刷新安排；管理员页面则覆盖答辩时段、项目与用户的增删改查操作，提供表格渲染与批量分配教师等交互。这些前端行为通过 REST API 与后台协作完成业务闭环，实现“提交—审核—评分—归档”的完整流程。

## 验证
系统提供清晰的运行流程：执行 `bun install` 安装依赖、`bun run src/db/initDB.ts` 初始化数据库、`bun run dev` 启动服务，即可使用默认账号进行登录并验证不同角色功能。同时，服务器暴露的 `/health` 接口可用于快速检测服务是否正常响应。通过登录后操作学生、教师与管理员页面，可验证项目提交流程、答辩安排展示与审批/评分闭环的正确性，前端的即时反馈机制也为操作结果提供了可视化确认。

进一步的验证措施包括：对数据库约束进行异常操作测试，例如尝试为同一学生重复创建项目、为已评分项目再次提交评分，以确认唯一约束与业务逻辑的正确性；同时，可通过模拟并发请求检查答辩时段分配在高频操作下的事务一致性。若将系统部署到教学服务器，可结合日志分析与简单的压力测试，评估 Bun 服务器在 30-50 并发用户下的响应情况，为课程运维提供数据支撑。

## 总结和展望
本项目以 SQLite 为核心数据存储，通过 Bun + Elysia 架构实现了角色分明、流程完整的课程项目管理平台，展示了数据库设计与 Web 应用协同的教学范例。系统从需求分析到数据模型、API 实现与前端交互，形成完整的教学闭环，帮助学生理解从概念模型到代码落地的全过程。当前版本在单节点部署、轻量化环境中已能满足课程演示与小规模使用需求。

未来可进一步扩展多会话持久化、文件附件上传、评分多维度量化以及消息通知等功能，并可引入单元测试与权限审计机制，以提升系统的可靠性与可维护性。针对大班教学，可考虑加入批量导入导出功能与数据备份策略；对于学术诚信需求，可扩展论文相似度检测接口。最终目标是将该系统打造成课程教学的持续实践平台，支持跨学期复用与多院系协作。
